{% extends 'LeoGameBundle:Default:index.html.twig' %}

{% block body %}
    {{parent()}}
    <h1>{{ 'Player'|trans({}, 'LeoGameBundle') }}</h1>

    <table>
        <tbody>
            <tr>
                <th>{{ 'Id'|trans({}, 'LeoGameBundle') }}</th>
                <td>{{ player.id }}</td>
            </tr>
            <tr>
                <th>{{ 'Username'|trans({}, 'LeoGameBundle') }}</th>
                <td>{{ player.username }}</td>
            </tr>
            {%if player.play.count %}
                <tr>
                    <th>{{ 'Play'|trans({}, 'LeoGameBundle') }}</th>
                    <td>
                        <ul>
                            {% for play in player.play%}
                                <li> {{ play.name }}
                                    {% if player.username==app.user or is_granted('ROLE_ADMIN')%}
                                        <a href="{{ path('player_delete',
{ 'user_id': player.id, 'type': 'play', 'game_id': play.id}) }}"><button>{{ 'Delete'|trans({}, 'LeoGameBundle') }}</button></a>
                                    {% endif%}
                                </li>
                            {%endfor%}
                        </ul>
                    </td>
                </tr>
            {%endif%}
            {%if player.watch.count %}
                <tr>
                    <th>{{ 'Watch'|trans({}, 'LeoGameBundle') }}</th>
                    <td>
                        <ul>
                            {% for watch in player.watch%}
                                <li> {{ watch.name }}
                                    {% if player.username==app.user or is_granted('ROLE_ADMIN')%}
                                        <a href="{{ path('player_delete',
{ 'user_id': player.id, 'type': 'watch', 'game_id': watch.id }) }}"><button>{{ 'Delete'|trans({}, 'LeoGameBundle') }}</button></a>
                                    {% endif %}
                                </li>
                            {%endfor%}
                        </ul>
                    </td>
                </tr>
            {%endif%}
        </tbody>
    </table>
    <ul>
        {% if player.username==app.user or is_granted('ROLE_ADMIN')%}
            <li>
                <a href="{{ path('player_edit', { 'id': player.id }) }}"><button>{{ 'Edit'|trans({}, 'LeoGameBundle') }}</button></a>
            </li>
        {%endif%}
        <li>
            <a href="{{ path('player_index') }}"><button>{{ 'Back to the list'|trans({}, 'LeoGameBundle') }}</button></a>
        </li>
    </ul>
{% endblock %}
